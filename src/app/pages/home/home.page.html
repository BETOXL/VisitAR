<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="misencuestas"></ion-back-button>
    </ion-buttons>
    <ion-title  mode=ios>
      VisitAR
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar()" color="secondary">
        <ion-icon slot="icon-only" name="log-out"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">VisitAR</ion-title>
    </ion-toolbar>
  </ion-header>
  <div style="max-width: 500px; width:100%; margin: auto; text-align: center;" >
    <ion-grid class="ion-grid-color">
      <ion-row class="ion-row-borde">
        <ion-col>
          <b>CAPS:</b> {{jsonEncuestaGet?.CAPS}}
        </ion-col>
        <ion-col>
          <b>Descripci√≥n:</b> {{jsonEncuestaGet?.Descripcion}}
        </ion-col>
        <ion-col>
          <b>Nombre:</b> {{jsonEncuestaGet?.Nombre}}
        </ion-col>
      </ion-row>
      <ion-row class="ion-row-borde">
        <ion-col>
          <b>IdCamp:</b> {{jsonEncuestaGet?.Id}} 
        </ion-col>
        <ion-col>
          <b>Fecha Desde:</b> {{jsonEncuestaGet?.FechaDesde | date:"dd/MM/yy"}} 
        </ion-col>
        <ion-col>
          <b>Fecha Hasta:</b> {{jsonEncuestaGet?.FechaHasta | date:"dd/MM/yy"}}
        </ion-col>
      </ion-row>
      <ion-row  class="ion-row-borde">
        <ion-col>
          <b>Provincia:</b> {{jsonEncuestaGet?.Provincia}}
        </ion-col>
        <ion-col>
          <b>Region:</b> {{jsonEncuestaGet?.Region}}
        </ion-col>
        <ion-col>
          <b>Localidad:</b> {{jsonEncuestaGet?.Localidad}}
        </ion-col>
      </ion-row>
    </ion-grid>
    <!-- <ion-input [(ngModel)]="fliaApellido"   placeholder="Ingrese Apellido Flia." type="text"></ion-input> -->
    <ion-button  [disabled]="btndisable" (click)="guardarMensaje()" expand="block" fill="outline" type="submit"   color="success">
      <ion-icon slot="start" name="save"></ion-icon>
       Completar y Guardar
    </ion-button>
    <h3>Seleccione un grupo:</h3>
    <ion-accordion-group #accordionGroup>
    <div *ngFor="let grupos of jsonEncuestaGet?.Grupos; let i=index">
      <ion-accordion>
        <ion-item slot="header" color="light">
          <ion-label text-wrap> {{grupos.Grupo}}</ion-label>
        </ion-item>
        <div class="ion-padding" slot="content">
      <div *ngIf="grupos.EsMultiple==false">
          <ion-item-divider color="primary">
            <ion-label text-wrap>
              {{grupos.Grupo}}
            </ion-label>
          </ion-item-divider>
          <br>
          <div *ngFor="let subgrupos of grupos.Subgrupos; let j=index">
              <div *ngIf="!subgrupos.condicion">
                  <ion-item>
                    <ion-label text-wrap class="ion-text-wrap">
                      <ion-text color="primary">
                        <h1>{{subgrupos.Subgrupo}}</h1>
                      </ion-text>
                    </ion-label>
                  </ion-item>
                  <div *ngFor="let preguntas of subgrupos.Preguntas; let k=index">
                    <div *ngIf="!preguntas.condicion">
                          <div *ngIf="preguntas.tipo=='Text'">
                            <ion-item>
                              <ion-label text-wrap  >
                                <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                {{preguntas.code}}-{{preguntas.pregunta}}:
                              </ion-label>
                              <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                            </ion-item>    
                          </div>
                          <div *ngIf="preguntas.tipo=='Number'">
                            <ion-item>
                              <ion-label text-wrap  >
                                <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                {{preguntas.code}}-{{preguntas.pregunta}}:
                              </ion-label>
                              <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                            </ion-item>
                          </div>
                          <div *ngIf="preguntas.tipo=='Combo'">
                            <ion-item>
                              <ion-label text-wrap >
                                <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                {{preguntas.code}}-{{preguntas.pregunta}}:
                              </ion-label>
                              <ion-select  (ionChange)="changeSelect(preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                  {{opcions}}
                                </ion-select-option>
                              </ion-select>
                            </ion-item>
                          </div>
                          <div *ngIf="preguntas.tipo=='Check'">
                                <ion-item>
                                  <ion-label text-wrap >
                                    <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                  </ion-label>
                                  <ion-select
                                    [(ngModel)]="preguntas.respuesta"
                                    placeholder="Multiple"
                                    [multiple]="true"
                                    value="preguntas.valor"
                                    (ionChange)="changeCombo(preguntas.id,$event)"
                                    okText="Confirmar" cancelText="Cancelar"
                                    mode='ios'
                                  >
                                    <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                  </ion-select>
                                </ion-item>
                          </div>
                          <div *ngIf="preguntas.tipo=='Date'">
                            <ion-item>
                              <ion-label text-wrap >
                                <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                {{preguntas.code}}-{{preguntas.pregunta}}:
                              </ion-label>
                              <ion-datetime-button  datetime="date{{preguntas.code}}"></ion-datetime-button>
                              <ion-modal [keepContentsMounted]="true">
                                <ng-template>
                                  <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{preguntas.code}}"></ion-datetime>
                                </ng-template>
                              </ion-modal>
                            </ion-item>
                          </div>
                          <div *ngIf="preguntas.tipo=='Bool'">
                            <ion-item>
                              <ion-label text-wrap >
                                <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                {{preguntas.code}}-{{preguntas.pregunta}}:
                              </ion-label>
                              <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                            </ion-item>
                          </div>
                    </div><!--  end if condicional -->
                    <div *ngIf="preguntas.condicion">
                      <div *ngFor="let rescon of respuestasCon; let l=index">
                        <div *ngIf="rescon==preguntas.condicion"> 
                                <div *ngIf="preguntas.tipo=='Text'">
                                  <ion-item>
                                    <ion-label text-wrap  >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                  </ion-item>    
                                </div>
                                <div *ngIf="preguntas.tipo=='Number'">
                                  <ion-item>
                                    <ion-label text-wrap  >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Combo'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-select  (ionChange)="changeSelect(preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                      <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                        {{opcions}}
                                      </ion-select-option>
                                    </ion-select>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Check'">
                                      <ion-item>
                                        <ion-label text-wrap >
                                          <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                          {{preguntas.code}}-{{preguntas.pregunta}}:
                                        </ion-label>
                                        <ion-select
                                          [(ngModel)]="preguntas.respuesta"
                                          placeholder="Multiple"
                                          [multiple]="true"
                                          value="preguntas.valor"
                                          (ionChange)="changeCombo(preguntas.id,$event)"
                                          okText="Confirmar" cancelText="Cancelar"
                                          mode='ios'
                                        >
                                          <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                        </ion-select>
                                      </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Date'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-datetime-button  datetime="date{{preguntas.code}}"></ion-datetime-button>
                                    <ion-modal [keepContentsMounted]="true">
                                      <ng-template>
                                        <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{preguntas.code}}"></ion-datetime>
                                      </ng-template>
                                    </ion-modal>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Bool'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                  </ion-item>
                                </div>
                        </div>

                      </div><!--  end for de respuestas nivel preguntas-->

                    </div><!--  end if condicional -->
                  </div>
              </div><!--  end if condicional subgrupo-->
              <div *ngIf="subgrupos.condicion">
                <div *ngFor="let resconS of respuestasCon; let y=index">
                    <div *ngIf="resconS==subgrupos.condicion">
                          <ion-item>
                            <ion-label text-wrap class="ion-text-wrap">
                              <ion-text color="primary">
                                <h1>{{subgrupos.Subgrupo}}</h1>
                              </ion-text>
                            </ion-label>
                          </ion-item>
                          <div *ngFor="let preguntas of subgrupos.Preguntas; let k=index">
                            <div *ngIf="!preguntas.condicion">
                                  <div *ngIf="preguntas.tipo=='Text'">
                                    <ion-item>
                                      <ion-label text-wrap  >
                                        <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                      </ion-label>
                                      <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                    </ion-item>    
                                  </div>
                                  <div *ngIf="preguntas.tipo=='Number'">
                                    <ion-item>
                                      <ion-label text-wrap  >
                                        <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                      </ion-label>
                                      <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                    </ion-item>
                                  </div>
                                  <div *ngIf="preguntas.tipo=='Combo'">
                                    <ion-item>
                                      <ion-label text-wrap >
                                        <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                      </ion-label>
                                      <ion-select  (ionChange)="changeSelect(preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                        <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                          {{opcions}}
                                        </ion-select-option>
                                      </ion-select>
                                    </ion-item>
                                  </div>
                                  <div *ngIf="preguntas.tipo=='Check'">
                                        <ion-item>
                                          <ion-label text-wrap >
                                            <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-select
                                            [(ngModel)]="preguntas.respuesta"
                                            placeholder="Multiple"
                                            [multiple]="true"
                                            value="preguntas.valor"
                                            (ionChange)="changeCombo(preguntas.id,$event)"
                                            okText="Confirmar" cancelText="Cancelar"
                                            mode='ios'
                                          >
                                            <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                          </ion-select>
                                        </ion-item>
                                  </div>
                                  <div *ngIf="preguntas.tipo=='Date'">
                                    <ion-item>
                                      <ion-label text-wrap >
                                        <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                      </ion-label>
                                      <ion-datetime-button  datetime="date{{preguntas.code}}"></ion-datetime-button>
                                      <ion-modal [keepContentsMounted]="true">
                                        <ng-template>
                                          <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{preguntas.code}}"></ion-datetime>
                                        </ng-template>
                                      </ion-modal>
                                    </ion-item>
                                  </div>
                                  <div *ngIf="preguntas.tipo=='Bool'">
                                    <ion-item>
                                      <ion-label text-wrap >
                                        <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                      </ion-label>
                                      <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                    </ion-item>
                                  </div>
                            </div><!--  end if condicional -->
                            <div *ngIf="preguntas.condicion">
                              <div *ngFor="let rescon of respuestasCon; let l=index">
                                <div *ngIf="rescon==preguntas.condicion"> 
                                        <div *ngIf="preguntas.tipo=='Text'">
                                          <ion-item>
                                            <ion-label text-wrap  >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                          </ion-item>    
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Number'">
                                          <ion-item>
                                            <ion-label text-wrap  >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Combo'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-select  (ionChange)="changeSelect(preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                              <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                                {{opcions}}
                                              </ion-select-option>
                                            </ion-select>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Check'">
                                              <ion-item>
                                                <ion-label text-wrap >
                                                  <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                  {{preguntas.code}}-{{preguntas.pregunta}}:
                                                </ion-label>
                                                <ion-select
                                                  [(ngModel)]="preguntas.respuesta"
                                                  placeholder="Multiple"
                                                  [multiple]="true"
                                                  value="preguntas.valor"
                                                  (ionChange)="changeCombo(preguntas.id,$event)"
                                                  okText="Confirmar" cancelText="Cancelar"
                                                  mode='ios'
                                                >
                                                  <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                                </ion-select>
                                              </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Date'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-datetime-button  datetime="date{{preguntas.code}}"></ion-datetime-button>
                                            <ion-modal [keepContentsMounted]="true">
                                              <ng-template>
                                                <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{preguntas.code}}"></ion-datetime>
                                              </ng-template>
                                            </ion-modal>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Bool'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                          </ion-item>
                                        </div>
                                </div>
        
                              </div><!--  end for de respuestas nivel preguntas-->
        
                            </div><!--  end if condicional -->
                          </div>

                    </div><!--  end subgrupo condicion-->
                </div><!--  end for de respuestas-->
              </div><!--  end if condicional subgrupo verdadero-->
          </div>
        </div> <!--  end if multiple -->
        <div *ngIf="grupos.EsMultiple==true">
            <ion-item-divider color="primary">
              <ion-label text-wrap>
                {{grupos.Grupo}} --->
              </ion-label>
              <ion-button (click)="addIntanciasGrupos(i,grupos.Subgrupo)" color="warning">
                <ion-icon slot="start" name="add-circle-outline"></ion-icon>
                Agregar
              </ion-button>
            </ion-item-divider>
            <br>
            <div *ngFor="let instancia of grupos.Instancias; let ins=index">
              <p style="color:blue">Se agreg√≥ una nueva instancia {{grupos.Grupo}} Nro:{{ins+1}}</p>
              <ion-button (click)="deleteIntanciasGrupos(i,ins)" color="dark">
                <ion-icon slot="start" name="close-circle-outline"></ion-icon>
                Quitar
              </ion-button>
                  <div *ngFor="let subgruposIns of instancia; let ji=index">
                    <div *ngIf="!subgruposIns.condicion">
                        <ion-item>
                          <ion-label text-wrap class="ion-text-wrap">
                            <ion-text color="primary">
                              <h1>{{subgruposIns.Subgrupo}}</h1>
                            </ion-text>
                          </ion-label>
                        </ion-item>
                        <div *ngFor="let preguntas of subgruposIns.preguntas; let k=index">
                          <div *ngIf="!preguntas.condicion">
                                <div *ngIf="preguntas.tipo=='Text'">
                                  <ion-item>
                                    <ion-label text-wrap  >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                  </ion-item>    
                                </div>
                                <div *ngIf="preguntas.tipo=='Number'">
                                  <ion-item>
                                    <ion-label text-wrap  >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Combo'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-select  (ionChange)="changeSelectMul(ins,preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                      <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                        {{opcions}}
                                      </ion-select-option>
                                    </ion-select>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Check'">
                                      <ion-item>
                                        <ion-label text-wrap >
                                          <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                          {{preguntas.code}}-{{preguntas.pregunta}}:
                                        </ion-label>
                                        <ion-select
                                          [(ngModel)]="preguntas.respuesta"
                                          placeholder="Multiple"
                                          [multiple]="true"
                                          value="preguntas.valor"
                                          (ionChange)="changeComboMul(ins,preguntas.id,$event)"
                                          okText="Confirmar" cancelText="Cancelar"
                                          mode='ios'
                                        >
                                          <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                        </ion-select>
                                      </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Date'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-datetime-button  datetime="date{{ins}}{{preguntas.code}}"></ion-datetime-button>
                                    <ion-modal [keepContentsMounted]="true">
                                      <ng-template>
                                        <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{ins}}{{preguntas.code}}"></ion-datetime>
                                      </ng-template>
                                    </ion-modal>
                                  </ion-item>
                                </div>
                                <div *ngIf="preguntas.tipo=='Bool'">
                                  <ion-item>
                                    <ion-label text-wrap >
                                      <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                      {{preguntas.code}}-{{preguntas.pregunta}}:
                                    </ion-label>
                                    <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                  </ion-item>
                                </div>
                          </div><!--  end if condicional -->
                          <div *ngIf="preguntas.condicion">
                            <div *ngFor="let rescon of respuestasCon; let l=index">
                              <div *ngIf="rescon=='{{' + ins + '}}' + preguntas.condicion"> 
                                      <div *ngIf="preguntas.tipo=='Text'">
                                        <ion-item>
                                          <ion-label text-wrap  >
                                            <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                        </ion-item>    
                                      </div>
                                      <div *ngIf="preguntas.tipo=='Number'">
                                        <ion-item>
                                          <ion-label text-wrap  >
                                            <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                        </ion-item>
                                      </div>
                                      <div *ngIf="preguntas.tipo=='Combo'">
                                        <ion-item>
                                          <ion-label text-wrap >
                                            <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-select  (ionChange)="changeSelectMul(ins,preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                            <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                              {{opcions}}
                                            </ion-select-option>
                                          </ion-select>
                                        </ion-item>
                                      </div>
                                      <div *ngIf="preguntas.tipo=='Check'">
                                            <ion-item>
                                              <ion-label text-wrap >
                                                <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                {{preguntas.code}}-{{preguntas.pregunta}}:
                                              </ion-label>
                                              <ion-select
                                                [(ngModel)]="preguntas.respuesta"
                                                placeholder="Multiple"
                                                [multiple]="true"
                                                value="preguntas.valor"
                                                (ionChange)="changeComboMul(ins,preguntas.id,$event)"
                                                okText="Confirmar" cancelText="Cancelar"
                                                mode='ios'
                                              >
                                                <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                              </ion-select>
                                            </ion-item>
                                      </div>
                                      <div *ngIf="preguntas.tipo=='Date'">
                                        <ion-item>
                                          <ion-label text-wrap >
                                            <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-datetime-button  datetime="date{{ins}}{{preguntas.code}}"></ion-datetime-button>
                                          <ion-modal [keepContentsMounted]="true">
                                            <ng-template>
                                              <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{ins}}{{preguntas.code}}"></ion-datetime>
                                            </ng-template>
                                          </ion-modal>
                                        </ion-item>
                                      </div>
                                      <div *ngIf="preguntas.tipo=='Bool'">
                                        <ion-item>
                                          <ion-label text-wrap >
                                            <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                            {{preguntas.code}}-{{preguntas.pregunta}}:
                                          </ion-label>
                                          <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                        </ion-item>
                                      </div>
                              </div>
      
                            </div><!--  end for de respuestas nivel preguntas-->
      
                          </div><!--  end if condicional -->
                        </div>
                    </div><!--  end if condicional subgrupo-->
                    <div *ngIf="subgruposIns.condicion">
                      <div *ngFor="let resconS of respuestasCon; let y=index">
                          <div *ngIf="resconS== '{{' + ins + '}}' + subgruposIns.condicion">
                                <ion-item>
                                  <ion-label text-wrap class="ion-text-wrap">
                                    <ion-text color="primary">
                                      <h1>{{subgruposIns.Subgrupo}}</h1>
                                    </ion-text>
                                  </ion-label>
                                </ion-item>
                                <div *ngFor="let preguntas of subgruposIns.preguntas; let k=index">
                                  <div *ngIf="!preguntas.condicion">
                                        <div *ngIf="preguntas.tipo=='Text'">
                                          <ion-item>
                                            <ion-label text-wrap  >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                          </ion-item>    
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Number'">
                                          <ion-item>
                                            <ion-label text-wrap  >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Combo'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-select  (ionChange)="changeSelectMul(ins,preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                              <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                                {{opcions}}
                                              </ion-select-option>
                                            </ion-select>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Check'">
                                              <ion-item>
                                                <ion-label text-wrap >
                                                  <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                  {{preguntas.code}}-{{preguntas.pregunta}}:
                                                </ion-label>
                                                <ion-select
                                                  [(ngModel)]="preguntas.respuesta"
                                                  placeholder="Multiple"
                                                  [multiple]="true"
                                                  value="preguntas.valor"
                                                  (ionChange)="changeComboMul(ins,preguntas.id,$event)"
                                                  okText="Confirmar" cancelText="Cancelar"
                                                  mode='ios'
                                                >
                                                  <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                                </ion-select>
                                              </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Date'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-datetime-button  datetime="date{{ins}}{{preguntas.code}}"></ion-datetime-button>
                                            <ion-modal [keepContentsMounted]="true">
                                              <ng-template>
                                                <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{ins}}{{preguntas.code}}"></ion-datetime>
                                              </ng-template>
                                            </ion-modal>
                                          </ion-item>
                                        </div>
                                        <div *ngIf="preguntas.tipo=='Bool'">
                                          <ion-item>
                                            <ion-label text-wrap >
                                              <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                              {{preguntas.code}}-{{preguntas.pregunta}}:
                                            </ion-label>
                                            <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                          </ion-item>
                                        </div>
                                  </div><!--  end if condicional -->
                                  <div *ngIf="preguntas.condicion">
                                    <div *ngFor="let rescon of respuestasCon; let l=index">
                                      <div *ngIf="rescon=='{{' + ins + '}}' + preguntas.condicion"> 
                                              <div *ngIf="preguntas.tipo=='Text'">
                                                <ion-item>
                                                  <ion-label text-wrap  >
                                                    <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                                  </ion-label>
                                                  <ion-input  [(ngModel)]="preguntas.respuesta"  type="text"></ion-input>
                                                </ion-item>    
                                              </div>
                                              <div *ngIf="preguntas.tipo=='Number'">
                                                <ion-item>
                                                  <ion-label text-wrap  >
                                                    <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                                  </ion-label>
                                                  <ion-input  [(ngModel)]="preguntas.respuesta" type="number"></ion-input>
                                                </ion-item>
                                              </div>
                                              <div *ngIf="preguntas.tipo=='Combo'">
                                                <ion-item>
                                                  <ion-label text-wrap >
                                                    <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                                  </ion-label>
                                                  <ion-select  (ionChange)="changeSelectMul(ins,preguntas.id,$event)" [(ngModel)]="preguntas.respuesta" value="preguntas.valor" mode='ios'  placeholder="Selecciona"  okText="Confirmar" cancelText="Cancelar" >
                                                    <ion-select-option *ngFor="let opcions of preguntas.opciones; let u=index" [value]="opcions">
                                                      {{opcions}}
                                                    </ion-select-option>
                                                  </ion-select>
                                                </ion-item>
                                              </div>
                                              <div *ngIf="preguntas.tipo=='Check'">
                                                    <ion-item>
                                                      <ion-label text-wrap >
                                                        <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                        {{preguntas.code}}-{{preguntas.pregunta}}:
                                                      </ion-label>
                                                      <ion-select
                                                        [(ngModel)]="preguntas.respuesta"
                                                        placeholder="Multiple"
                                                        [multiple]="true"
                                                        value="preguntas.valor"
                                                        (ionChange)="changeComboMul(ins,preguntas.id,$event)"
                                                        okText="Confirmar" cancelText="Cancelar"
                                                        mode='ios'
                                                      >
                                                        <ion-select-option *ngFor="let opcion of preguntas.opciones; let p=index" [value]="opcion">{{opcion}}</ion-select-option>
                                                      </ion-select>
                                                    </ion-item>
                                              </div>
                                              <div *ngIf="preguntas.tipo=='Date'">
                                                <ion-item>
                                                  <ion-label text-wrap >
                                                    <ion-icon *ngIf="preguntas.respuesta" color="success" name="checkmark-done-outline"></ion-icon>
                                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                                  </ion-label>
                                                  <ion-datetime-button  datetime="date{{ins}}{{preguntas.code}}"></ion-datetime-button>
                                                  <ion-modal [keepContentsMounted]="true">
                                                    <ng-template>
                                                      <ion-datetime [(ngModel)]="preguntas.respuesta" [showDefaultButtons]="true" cancelText="cancelar" doneText="ok" presentation="date" id="date{{ins}}{{preguntas.code}}"></ion-datetime>
                                                    </ng-template>
                                                  </ion-modal>
                                                </ion-item>
                                              </div>
                                              <div *ngIf="preguntas.tipo=='Bool'">
                                                <ion-item>
                                                  <ion-label text-wrap >
                                                    <ion-icon  color="success" name="checkmark-done-outline"></ion-icon>
                                                    {{preguntas.code}}-{{preguntas.pregunta}}:
                                                  </ion-label>
                                                  <ion-toggle mode='ios' [(ngModel)]="preguntas.respuesta" color="success"></ion-toggle>
                                                </ion-item>
                                              </div>
                                      </div>
              
                                    </div><!--  end for de respuestas nivel preguntas-->
              
                                  </div><!--  end if condicional -->
                                </div>
      
                          </div><!--  end subgrupo condicion-->
                      </div><!--  end for de respuestas-->
                    </div><!--  end if condicional subgrupo verdadero-->
                </div>  

            </div><!--  end if for instancias -->
        </div><!--  end if multiple true -->
        
        </div>
      </ion-accordion>
    </div><!--  end FOR GRUPOS -->

    </ion-accordion-group>
  </div>
</ion-content>
